@page
@model IndexModel

<div class="main-container">
    <div class="main-section">
        <div class="main-header">
            <h2>Non-discoverable Credentials</h2>
        </div>
        <div class="main-description">
            <p><b>Non-discoverable credentials</b> (also called non-resident keys) are not stored on the authenticator in a way that allows them to be automatically discovered. Instead, the server retains the credential identifier and provides it during sign-in so the authenticator can locate the correct private key. This approach offers strong cryptographic security but requires the user to first identify their account (for example, by entering a username). Non-discoverable credentials are well suited for use as a second factor alongside passwords or in scenarios where authenticator storage is limited. Please note that in practice many modern authenticators create discoverable credentials even when non-discoverable ones are requested, usually due to platform or device policies.</p>
        </div>
        <div class="main-description">
            <p>This page demonstrates the use of non-discoverable credentials. You'll need to type a username and a display name during sign-up. For subsequent sign-ins, however, only your username will be required.</p>
        </div>
    </div>

    <div id="auth-ndc-section" class="inner-container hide">
        <div class="inner-container-wrapper">
            <!-- Sign Up Section -->
            <div class="auth-section signup-section">
                <div class="auth-header">
                    <h3>Sign Up</h3>
                </div>
                <form id="signupForm">
                    <div class="form-group">
                        <label for="signUpUserName">Username</label>
                        <input type="text"
                               id="signUpUserName"
                               name="username"
                               maxlength="64"
                               placeholder="Enter your username"
                               required class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="signUpDisplayName">Display Name</label>
                        <input type="text"
                               id="signUpDisplayName"
                               name="displayname"
                               maxlength="64"
                               placeholder="Enter your display name"
                               required
                               class="form-control">
                    </div>
                    <div class="button-row">
                        <button type="button"
                                id="signUpButton"
                                name="signUpButton"
                                class="btn btn-primary btn-block">
                            <i class="fas fa-user-plus me-2"></i>Sign Up
                        </button>
                    </div>
                </form>
            </div>

            <!-- Sign In Section -->
            <div class="auth-section signin-section">
                <div class="auth-header">
                    <h3>Sign In</h3>
                </div>
                <form id="signinForm">
                    <div class="form-group">
                        <label for="signInUserName">Username</label>
                        <input type="text"
                               id="signInUserName"
                               name="username"
                               maxlength="64"
                               placeholder="Enter your username"
                               required
                               class="form-control">
                    </div>
                    <div class="button-row">
                        <button type="button" id="signInButton" class="btn btn-primary btn-block">
                            <i class="fas fa-key me-2"></i>Sign In
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <div class="disclaimer">
            <p>Non-discoverable credentials are temporarily stored in memory cache for a maximum of 24 hours.</p>
        </div>
    </div>
    <div id="auth-ndc-notsupported-section" class="inner-container hide">
        <div class="auth-section signup-section">
            This version of your browser does not support non-discoverable credentials.
        </div>
    </div>
</div>

<environment include="Development">
    <script src="~/js/site-ndc.js"></script>
</environment>
<environment exclude="Development">
    <script src="~/js/site-ndc.min.js"></script>
</environment>